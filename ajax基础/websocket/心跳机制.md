# 心跳机制

在使用 websocket 时，有时候会遇到网络断开的情况，但是在网络断开时并没有触发onclose的事件
这时客户端或服务端还在继续向对端发送数据，就会造成数据丢失

心跳机制每隔一段时间会向服务端发送一个数据包，告诉服务器自己还活着
同时服务端也会回传一个一样的数据包告诉客户端自己还活着。否则说明网络断开连接，需要重连

## 心跳检测实现方法

每隔一段固定的时间，向服务器端发送一个ping数据，如果客户端通过 onmessage 事件监听到服务端返回的pong数据的话，说明请求正常
一般是用定时器，每隔3s的情况下向服务端发送ping信号，如果网络断开，在指定时间内没收到服务端的pong响应信号，则可通过 onclose 事件监听到
因此可以在 onclose 事件中调用重新连接的操作
