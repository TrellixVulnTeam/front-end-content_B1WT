# 因特网的五层协议栈

## 1. 应用层

应用层(application-layer）的任务是通过应用进程间的交互来完成特定网络应用
应用层之间交互的数据单元称为报文

### 应用层主要设备及协议

域名系统 DNS，支持万维网应用的 HTTP 协议，支持电子邮件的 SMTP 协议等等

- 域名系统(DNS，Domain Name System)：是因特网的一项核心域名服务，将机器域名转换成IP地址。

- 超文本传输协议（HTTP，HyperText Transfer Protocol）是互联网上应用最为广泛的一种网络协议。所有的 WWW（万维网）文件都必须遵守这个标准。

## 2. 传输层

传输层(transport layer)的任务就是负责向两台主机进程之间的通信提供数据传输服务
**传输层提供端对端的服务**
应用进程利用该服务传送应用层报文

### 传输层主要设备及协议

传输层常用的两种协议：

- 传输控制协议（TCP）：提供面向连接的，可靠的数据传输服务。
TCP需要先建立连接，每一条TCP连接只能有两个端点，每一条TCP连接只能是一对一；
TCP提供可靠的传输服务，通过TCP连接传送的数据，无差错、不丢失、不重复、并且按序到达；
TCP提供全双工通信，允许通信双方的应用进程在任何时候都能发送数据，TCP连接的两端都设有发送缓存和接收缓存，用来临时存放双方通信的数据；
TCP面向字节流，“流”（Stream）指的是流入进程或从进程流出的字节序列。

- 用户数据协议（UDP）：提供无连接的，尽最大努力的数据传输服务（不保证数据传输的可靠性）。
UDP是无连接的，不保证可靠的传输服务，因此主机不需要维持复杂的链接状态；
UDP是面向报文的；UDP没有拥塞控制，因此网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如直播，实时视频会议等）；
UDP 支持一对一、一对多、多对一和多对多的交互通信；
UDP 的首部开销小，只有8个字节，比TCP的20个字节的首部要短。

## 3. 网络层

网络层的任务就是选择合适的网间路由和交换结点，确保计算机通信的数据及时传送

在发送数据时，网络层把传输层产生的报文段或用户数据报封装成分组和包进行传送
在 TCP/IP 体系结构中，由于网络层使用IP协议，因此分组也叫IP数据报，简称数据报。

互联网是由大量的异构网络通过路由器相互连接起来的
互联网使用的网络层协议是无连接的网际协议和许多路由选择协议，因此互联网的网络层也叫做网际层或IP层。

在互联网使用的各种协议中最重要和最著名的就是 TCP/IP 两个协议。

### 网络层主要设备及协议

主要为 IP 协议和 ICMP 协议

IP地址：互联网协议地址(Internet Protocol Address)，是分配给用户上网使用的网际协议的设备的数字标签
所谓IP地址就是给每个连接在互联网上的主机分配的一个32位地址，IP地址用二进制来表示，每个IP地址长32bit，比特换算成字节，就是4个字节

IPv4(internet Protocol Version 4) IPv6(internet Protocol Version 6) IPv6 和 IPv4 都是“互联网协议”，IPv6是用于替代IPV4的下一代IP协议
IPv4 和 IPv6 区别：

1. 扩展了路由和寻址的能力，IPv6 把 IP 地址由 32位 增加到 128位(扩大了4倍)；
2. 报头格式的简化，地址扩大了 4 倍，但报头只有 IPv4 的 2 倍大。

## 4. 数据链路层

数据链路层(data link layer)通常简称为链路层
**数据链路层提供点对点的服务**
两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层的协议

在两个相邻节点之间传送数据时，数据链路层将网络层接下来的IP数据报组装成帧，在两个相邻节点间的链路上传送帧
每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等）。在接收数据时，控制信息使接收端能够知道一个帧从哪个比特开始和到哪个比特结束

### 链路层主要设备及协议

主要为 ARP 协议、RARP 协议和 Data Link 协议

ARP（Address Resolve Protocol, 地址解析协议） 和 RARP（Reverse Address Resolve Protocol，逆地址解析协议）
负责IP地址和机器物理地址的解析和逆解析

## 5. 物理层

物理层(physical layer)的作用是实现相邻计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异
“透明传送比特流”表示经实际电路传送后的比特流没有发生变化，对传送的比特流来说，这个电路好像是看不见的

在物理层上所传送的数据单位是比特

## 与OSI七层协议模型、TCP/IP四层模型区别

（1）OSI七层模型
全称为：开放系统互联（OSI）模型
七层：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层

相对因特网的五层协议，多了表示层与会话层，其他五层与其功能大致相同

- 表示层：作用是使通信的应用程序能够解释交换数据的涵义，这些服务包括数据压缩和数据加密以及数据描述
          表示层在传输之前是否进行加密或压缩处理二进制ASCII（如果网页出现乱码 则是表示层问题）

- 会话层：提供了数据交换的定界和同步功能，包括了建立检查点和恢复方案的方法

（2）TCP/IP四层模型
TCP/IP主要包括：应用层、传输层、网络层和链路层。
