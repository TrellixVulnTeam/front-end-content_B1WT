# HTTP 与 HTTPS 的区别

## 1. 协议不同

HTTP的协议运行在TCP之上，明文传输，客户端与服务器端都无法验证对方的身份
HTTPS的协议相当于身披 SSL(Secure Socket Layer，安全套接层)外壳 HTTP，运行于SSL上，SSL运行于TCP之上，是添加了加密和认证机制的 HTTP。

## 2. 端口不同

HTTP 默认端口号为80
HTTPS 默认端口号为443

## 3. 资源消耗及安全性

HTTP 资源消耗较少，但是安全性弱
HTTPS 由于加密机制，会消耗更多内存和CPU，但是安全性强

## 4. 开销不同

HTTP 不需要证书
HTTPS 需要向认证机构购买证书

当运用 HTTPS 连接服务器时，服务器会向客户端发送一份证书信息，相当于告诉客户端你访问的服务器没有问题

## 什么时候用 HTTPS

一般采取分而治之的方式，当访客较多的网站主页可以使用 HTTP 协议，有关用户信息等方面使用 HTTPS 协议

## HTTPS 加密机制

HTTPS的加密机制为：对称加密和非对称加密并用的混合加密机制

- 对称加密：加密和解密使用同一个密钥的方式，这种方式存在的最大问题就是密钥发送问题，即如何安全地将密钥发给对方；

- 非对称加密：使用一对非对称密钥，即公钥和私钥，公钥可以随意发布，但私钥只有自己知道。
发送密文的一方使用对方的公钥进行加密处理，对方接收到加密信息后，使用自己的私钥进行解密。
由于非对称加密的方式不需要发送用来解密的私钥，所以可以保证安全性；但是和对称加密比起来，非常的慢

## HTTPS 通信过程

1. 客户端向服务端发起请求报文，并发送加密算法
2. 服务器根据加密算法会生成一对非对称的公私钥对，将公钥和域名等信息提交到证书机构申请证书，服务器的私钥由自身保管
3. 证书机构会将服务器传来的公钥和数字证书绑定在一起，并使用自己的私钥做数字签名，一起交给服务器
4. 服务器将证书机构发送给客户端
5. 客户端从本地安装的根证书中找到证书机构的公钥，用公钥来验证数字签名，确认证书机构和服务器的身份，并得到服务器发来的公钥
6. 客户端随机生成一个对称秘钥，用服务器发来的公钥加密这个密钥，再传输给服务器
7. 服务器用私钥解密后取出对称秘钥，并用该密钥加密确认内容返回给客户端，告知可以开始通信
8. 客户端与服务器以后就可以采用该密钥进行加密通信了
