# nginx 实例 ———— 反向代理

## nginx 反向代理一

实现效果：
打开浏览器，输入 `www.123.com` 跳转到 127.0.0.1:3000 页面中
提前用 nodejs 将3000端口服务器打开，实现自动跳转

具体实现：
第一步：在 windows 的 host文件进行配置，配置 `www.123.com` 映射的 IP地址
第二步：在 nginx 进行请求转发的配置(反向代理配置)
在 http块 的 server块 的 location 中加入 proxy_pass  `http://120.0.0.1:3000`;

## nginx 反向代理二

实现效果：
使用 nginx 反向代理，根据访问的路径跳转到不同端口的服务
nginx 监听端口 9001
访问 `http://127.0.0.1:9001/edu/` 直接跳转到 127.0.0.1:8080
访问 `http://127.0.0.1:9001/vod/` 直接跳转到 127.0.0.1:8081

具体实现：
第一步：准备两个服务器，一个监听 8080 端口，一个监听 8081 端口
第二步：找到 nginx 配置文件，进行反向代理配置

```html
server {
    listen       9001;
    server_name  127.0.0.1;
    location ~ /edu/ {
      proxy_pass  http://127.0.0.1:8080;
    }

    location ~ /vod/ {
      proxy_pass  http://127.0.0.1:8081;
    }
}
```

location 后的符号：

- =：不含正则表达式，要求请求字符串与 url 严格匹配
- ~: 用于表示 url 包含正则表达式，且区分大小写
- ~*: 用于表示 url 包含正则表达式，且不区分大小写
